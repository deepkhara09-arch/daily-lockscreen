<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wallpaper</title>

<style>
@font-face{
  font-family:"FuturaCustom";
  src:url("/assets/futura.ttf");
}

body{
  margin:0;
  background:black;
}
img{
  width:100vw;
  height:100vh;
  object-fit:cover;
}
</style>
</head>

<body>

<canvas id="c"></canvas>

<script>
// TASKS
const tasks=["Workout","Study","Reading","Test","Mock Interview"];
const colors=["yellow","red","orange","blue","green"];
const state = JSON.parse(localStorage.getItem("state")) || {};

const canvas=document.getElementById("c");
canvas.width=1170;
canvas.height=2532;
const ctx=canvas.getContext("2d");

// BACKGROUND
ctx.fillStyle="black";
ctx.fillRect(0,0,canvas.width,canvas.height);

// SAFE SPACE FOR CLOCK
let y=420;

// LOAD ASSETS
function load(src){
  return new Promise(r=>{
    const i=new Image();
    i.src=src;
    i.onload=()=>r(i);
  });
}

Promise.all([
  load("assets/check.png"),
  load("assets/dino.png"),
  load("assets/yellow.png"),
  load("assets/red.png"),
  load("assets/orange.png"),
  load("assets/blue.png"),
  load("assets/green.png")
]).then(([check,dino,yel,red,org,blu,grn])=>{

  const circles=[yel,red,org,blu,grn];
  let done=0;

  tasks.forEach((t,i)=>{
    if(state[t]) done++;

    // Circle
    ctx.drawImage(circles[i],120,y,120,120);

    // Check if done
    if(state[t]){
      ctx.drawImage(check,140,y+22,80,80);
    }

    // Text
    ctx.fillStyle="white";
    ctx.font="bold 90px FuturaCustom";
    ctx.textAlign="left";
    ctx.fillText(t,280,y+95);

    y+=200;
  });

  // PROGRESS
  ctx.textAlign="center";
  ctx.fillStyle="white";
  ctx.font="bold 70px FuturaCustom";
  ctx.fillText(`${done}/${tasks.length} Completed`,canvas.width/2,y+120);

  // DINO
  ctx.drawImage(dino,canvas.width/2-200,canvas.height-420,400,300);

  // OUTPUT
  const img=document.createElement("img");
  img.src=canvas.toDataURL("image/png");
  document.body.innerHTML="";
  document.body.appendChild(img);
});
</script>

</body>
</html>


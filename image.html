<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wallpaper</title>

<style>
@font-face{
  font-family:"FuturaCustom";
  src:url("/assets/futura.ttf");
}

body{
  margin:0;
  background:black;
}

img{
  width:100vw;
  height:100vh;
  object-fit:cover;
}
</style>
</head>

<body>

<canvas id="c"></canvas>

<script>

const tasks = ["Workout","Study","Reading","Test","Mock Interview"];
const colors = ["#FFD84D","#FF3B30","#FF9F0A","#32D2F0","#2BD67B"];
const state = JSON.parse(localStorage.getItem("state")) || {};

const canvas = document.getElementById("c");
canvas.width = 1170;
canvas.height = 2532;
const ctx = canvas.getContext("2d");

// Background
ctx.fillStyle = "black";
ctx.fillRect(0,0,canvas.width,canvas.height);

let y = 520;

function load(src){
  return new Promise(res=>{
    const img = new Image();
    img.src = src;
    img.onload = () => res(img);
  });
}

Promise.all([
  load("/assets/check.png"),
  load("/assets/dino.png")
]).then(([check,dino])=>{

  let done = 0;

  tasks.forEach((task,i)=>{

    if(state[task]) done++;

    const cx = 200;
    const cy = y + 80;
    const r = 80;

    // Outer circle
    ctx.beginPath();
    ctx.arc(cx,cy,r,0,Math.PI*2);
    ctx.fillStyle = colors[i];
    ctx.fill();

    // Inner highlight ring
    ctx.beginPath();
    ctx.arc(cx,cy,r-6,0,Math.PI*2);
    ctx.strokeStyle = "rgba(255,255,255,0.25)";
    ctx.lineWidth = 6;
    ctx.stroke();

    // Subtle shadow
    ctx.beginPath();
    ctx.arc(cx,cy,r-10,0,Math.PI*2);
    ctx.strokeStyle = "rgba(0,0,0,0.25)";
    ctx.lineWidth = 8;
    ctx.stroke();

    // Checkmark
    if(state[task]){
      const size = 110;
      ctx.drawImage(check,cx-size/2,cy-size/2,size,size);
    }

    // Text
    ctx.fillStyle="white";
    ctx.font="900 100px FuturaCustom, Arial";
    ctx.fillText(task,360,y+115);

    y += 220;
  });

  // Progress
  ctx.textAlign="center";
  ctx.font="900 70px FuturaCustom, Arial";
  ctx.fillText(`${done}/5 Completed`,canvas.width/2,y+120);

  // Dino (bigger + higher)
  ctx.drawImage(
    dino,
    canvas.width/2-300,
    canvas.height-600,
    600,
    420
  );

  const img=document.createElement("img");
  img.src = canvas.toDataURL("image/png");
  document.body.innerHTML="";
  document.body.appendChild(img);

});

</script>

</body>
</html>

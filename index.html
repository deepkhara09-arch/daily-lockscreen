<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Daily Tasks</title>

<style>
body{
  background:#0b0b0b;
  color:white;
  font-family:-apple-system, BlinkMacSystemFont, system-ui;
  text-align:center;
  padding:30px 16px;
}

h1{
  font-size:32px;
  margin-bottom:26px;
}

/* BASE BUTTON */
button{
  width:100%;
  max-width:420px;
  min-height:90px;
  margin:14px auto;
  font-size:26px;
  font-weight:700;
  border-radius:22px;
  border:none;
  display:block;

  cursor:pointer;              /* ðŸ‘ˆ IMPORTANT */
  pointer-events:auto;         /* ðŸ‘ˆ IMPORTANT */

  transition:0.2s ease;
}

/* OFF */
.off{
  background:#1f1f1f;
  color:white;
}

/* ON COLORS */
.workout.on{ background:#22c55e; color:black; }
.study.on{ background:#3b82f6; color:white; }
.reading.on{ background:#facc15; color:black; }
.test.on{ background:#ef4444; color:white; }
.mock.on{ background:#f97316; color:white; }
</style>
</head>

<body>

<h1>Today's Tasks</h1>
<div id="buttons"></div>

<script>

const tasks=["workout","study","reading","test","mock"];

async function loadState(){
  const res = await fetch("/state.json",{cache:"no-store"});
  return await res.json();
}

async function saveState(state){
  await fetch("/api/save",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify(state)
  });
}

async function render(){
  const state = await loadState();
  const root = document.getElementById("buttons");
  root.innerHTML = "";

  tasks.forEach(task=>{
    const btn = document.createElement("button");
    btn.textContent = task.toUpperCase();

    // ALWAYS include task name
    btn.className = `${task} ${state[task] ? "on" : "off"}`;

    btn.addEventListener("click", async ()=>{
      state[task] = !state[task];
      await saveState(state);
      render();
    });

    root.appendChild(btn);
  });
}

render();

</script>

</body>
</html>

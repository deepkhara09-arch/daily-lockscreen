<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Daily Tasks</title>

<style>
body{
  background:#0b0b0b;
  color:white;
  font-family:system-ui;
  text-align:center;
  padding:40px 20px;
}

h1{
  font-size:36px;
  margin-bottom:30px;
}

button{
  width:90%;
  max-width:400px;
  padding:22px;
  margin:12px auto;
  font-size:22px;
  border-radius:14px;
  border:none;
  display:block;
}

.on{ background:#22c55e; color:black; }
.off{ background:#222; color:white; }
</style>
</head>

<body>

<h1>Today's Tasks</h1>

<div id="buttons"></div>

<script>
const tasks=["workout","study","reading","test","mock"];

async function loadState(){
  const res = await fetch("/state.json");
  return await res.json();
}

async function saveState(state){
  await fetch("/api/save",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify(state)
  });
}

async function render(){
  const state = await loadState();
  const root=document.getElementById("buttons");
  root.innerHTML="";

  tasks.forEach(t=>{
    const b=document.createElement("button");
    b.textContent=t.toUpperCase();
    b.className=state[t]?"on":"off";
    b.onclick=async()=>{
      state[t]=!state[t];
      await saveState(state);
      render();
    };
    root.appendChild(b);
  });
}

render();
</script>

</body>
</html>

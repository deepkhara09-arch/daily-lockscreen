<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Daily Lockscreen</title>

<style>
body{
  background:black;
  color:white;
  font-family:Arial, sans-serif;
  text-align:center;
}

button{
  width:90%;
  padding:20px;
  margin:10px;
  font-size:22px;
  border-radius:12px;
  border:none;
  background:#333;
  color:white;
}

button.active{
  background:#00ff88;
  color:black;
}
</style>
</head>

<body>

<h2>Daily Tasks</h2>

<button onclick="toggle('workout')">Workout</button>
<button onclick="toggle('study')">Study</button>
<button onclick="toggle('reading')">Reading</button>
<button onclick="toggle('test')">Test</button>
<button onclick="toggle('mock')">Mock Interview</button>

<script>

let state = {
  workout:false,
  study:false,
  reading:false,
  test:false,
  mock:false
};

async function loadState(){
  try{
    const res = await fetch("/state.json");
    state = await res.json();
    render();
  }catch(e){}
}

function render(){
  document.querySelectorAll("button").forEach(btn=>{
    const key = btn.innerText.toLowerCase().split(" ")[0];
    if(state[key]) btn.classList.add("active");
    else btn.classList.remove("active");
  });
}

async function toggle(task){
  state[task] = !state[task];
  render();

  await fetch("/api/save",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(state)
  });
}

loadState();

</script>

</body>
</html>

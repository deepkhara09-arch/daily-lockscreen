<!DOCTYPE html>
<html>
<head>
<title>Daily Checklist</title>

<style>
body{
  font-family:sans-serif;
  background:#111;
  color:white;
  text-align:center;
}

button{
  width:80%;
  padding:20px;
  margin:10px;
  font-size:20px;
  border-radius:12px;
  border:none;
}

.done{
  background:#00c853;
  color:black;
}

.notdone{
  background:#333;
  color:white;
}
</style>

</head>

<body>

<h1>Daily Checklist</h1>

<button id="workout" onclick="toggleTask('workout')">Workout</button>
<button id="study" onclick="toggleTask('study')">Study</button>
<button id="reading" onclick="toggleTask('reading')">Reading</button>
<button id="test" onclick="toggleTask('test')">Test</button>
<button id="mock" onclick="toggleTask('mock')">Mock</button>

<script>

const SUPABASE_URL = "https://vgirktwcmamfjnjbqndn.supabase.co"
const ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZnaXJrdHdjbWFtZmpuamJxbmRuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwMzU0OTYsImV4cCI6MjA4NTYxMTQ5Nn0.StAPWo-nEvMnUwet8-f8BXmQZdSFn-UGVGwDHFNvlLM"

const TASKS = ["workout","study","reading","test","mock"]

async function getState(){
  const r = await fetch(
    SUPABASE_URL + "/rest/v1/state?id=eq.1",
    {
      headers:{
        apikey: ANON_KEY,
        Authorization: "Bearer " + ANON_KEY
      }
    }
  )
  const d = await r.json()
  return d[0]
}

async function render(){
  const s = await getState()
  TASKS.forEach(t=>{
    document.getElementById(t).className =
      s[t] ? "done" : "notdone"
  })
}

async function toggleTask(task){
  const s = await getState()
  s[task] = !s[task]

  await fetch(
    SUPABASE_URL + "/rest/v1/state?id=eq.1",
    {
      method:"PATCH",
      headers:{
        apikey: ANON_KEY,
        Authorization: "Bearer " + ANON_KEY,
        "Content-Type":"application/json"
      },
      body: JSON.stringify({
        [task]: s[task]
      })
    }
  )

  render()
}

render()

</script>


</body>
</html>





